<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ride Hailing App</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        margin: 0;
        padding: 16px;
        background: #f9f9f9;
      }

      h1, h2, h3 {
        margin: 0 0 12px;
        font-weight: 600;
      }

      button {
        width: 100%;
        padding: 14px;
        margin-top: 12px;
        border: none;
        border-radius: 8px;
        background: #3498db;
        color: white;
        font-size: 16px;
        cursor: pointer;
      }

      button:disabled {
        background: #aaa;
      }

      input, select {
        width: 100%;
        padding: 12px;
        margin: 8px 0;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 15px;
      }

      #confirmationMessage {
        margin-top: 16px;
        color: green;
        font-weight: bold;
      }

      #bookingForm {
        background: white;
        padding: 16px;
        margin-top: 16px;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      }

      .history-card {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px;
        border: 1px solid #eee;
        border-radius: 10px;
        background: white;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      }
    </style>
  </head>
  <body>
    <h1>ðŸš– Ride Hailing App</h1>

    <!-- Ride History Section -->
    <div id="historyContainer"></div>

    <!-- Booking Button -->
    <button id="bookButton">Book a Ride</button>

    <!-- Booking Form -->
    <div id="bookingForm" style="display:none;">
      <h2>Book Your Ride</h2>
      <form>
        <label for="name">Your Name:</label>
        <input type="text" id="name" name="name" placeholder="Enter your name" required>

        <label for="pickup">Pickup Location:</label>
        <input type="text" id="pickup" name="pickup" placeholder="Enter pickup" required>

        <label for="dropoff">Drop-off Location:</label>
        <input type="text" id="dropoff" name="dropoff" placeholder="Enter drop-off" required>

        <label for="rideType">Ride Type:</label>
        <select id="rideType" name="rideType" required>
          <option value="Standard">Standard</option>
          <option value="Taxi">Taxi</option>
          <option value="Premium">Premium</option>
        </select>

        <button type="submit">Confirm Ride</button>
      </form>
    </div>

    <p id="confirmationMessage"></p>

    <script>
      const button = document.getElementById("bookButton");
      const form = document.getElementById("bookingForm");
      const confirmation = document.getElementById("confirmationMessage");

      // Create Ride History container
      const historyContainer = document.getElementById("historyContainer");
      historyContainer.innerHTML = `
        <div style="display:flex; align-items:center; justify-content:space-between;">
          <h3 style="margin:0">Ride history</h3>
          <button id="toggleHistoryBtn" style="padding:6px 10px; border:none; border-radius:6px; background:#3498db; color:#fff; cursor:pointer;">
            Show
          </button>
        </div>
        <div id="rideHistoryContent" style="display:none; margin-top:12px;">
          <small id="historyCount" style="color:#666"></small>
          <div id="rideHistoryList" style="display:flex; flex-direction:column; gap:12px; margin-top:12px;"></div>
          <div style="text-align:right; margin-top:12px;">
            <button id="clearHistoryBtn" style="padding:10px; border-radius:6px; border:none; background:#e74c3c; color:#fff; cursor:pointer">
              Clear history
            </button>
          </div>
        </div>
      `;

      const rideForm = form.querySelector("form");
      const toggleBtn = document.getElementById("toggleHistoryBtn");
      const historyContent = document.getElementById("rideHistoryContent");
      const historyList = document.getElementById("rideHistoryList");
      const historyCount = document.getElementById("historyCount");
      const clearBtn = document.getElementById("clearHistoryBtn");

      let rideHistory = JSON.parse(localStorage.getItem("rideHistory")) || [];

      // Toggle history
      toggleBtn.addEventListener("click", () => {
        if (historyContent.style.display === "none") {
          historyContent.style.display = "block";
          toggleBtn.textContent = "Hide";
        } else {
          historyContent.style.display = "none";
          toggleBtn.textContent = "Show";
        }
      });

      // Render ride history
      function renderHistory() {
        historyList.innerHTML = "";
        historyCount.textContent = `${rideHistory.length} rides`;
        rideHistory.forEach((ride, i) => {
          const el = document.createElement("div");
          el.className = "history-card";
          el.innerHTML = `
            <div>
              <strong>${ride.rideType}</strong><br>
              ${ride.pickup} â†’ ${ride.dropoff}<br>
              <small>${ride.driver} â€¢ ${ride.car} â€¢ ${ride.plate}</small>
            </div>
          `;
          historyList.appendChild(el);
        });
      }

      renderHistory();

      clearBtn.addEventListener("click", () => {
        rideHistory = [];
        localStorage.setItem("rideHistory", JSON.stringify(rideHistory));
        renderHistory();
      });

      // Book button
      button.addEventListener("click", () => {
        form.style.display = "block";
        confirmation.textContent = "";
      });

      // Handle booking form
      rideForm.addEventListener("submit", (event) => {
        event.preventDefault();

        const name = document.getElementById("name").value;
        const pickup = document.getElementById("pickup").value;
        const dropoff = document.getElementById("dropoff").value;
        const rideType = document.getElementById("rideType").value;

        const drivers = ["Kwame", "Ama", "Yaw", "Akosua", "Kojo"];
        const cars = ["Toyota Corolla", "Hyundai Accent", "Kia Rio", "Nissan Versa", "Honda Civic"];
        const plates = ["GX-1234-24", "AS-5678-23", "GR-9101-22", "BA-3456-21", "ER-7890-20"];

        const driver = drivers[Math.floor(Math.random() * drivers.length)];
        const car = cars[Math.floor(Math.random() * cars.length)];
        const plate = plates[Math.floor(Math.random() * plates.length)];
        const arrivalTime = Math.floor(Math.random() * 9) + 2;

        form.style.display = "none";

        const ride = { name, pickup, dropoff, rideType, driver, car, plate, arrivalTime };
        rideHistory.push(ride);
        localStorage.setItem("rideHistory", JSON.stringify(rideHistory));
        renderHistory();

        confirmation.textContent =
          `âœ… Hi ${name}, your ${rideType} ride from ${pickup} to ${dropoff} is confirmed! ` +
          `${driver} is arriving in ${arrivalTime} minutes driving a ${car} (${plate}).`;
      });
    </script>
  </body>
</html>
