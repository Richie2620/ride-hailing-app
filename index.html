<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ride Hailing App</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #121212;
      color: #fff;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Map area */
    #map {
      flex: 1;
      background: url("https://i.imgur.com/dyKX5Ql.png") center/cover no-repeat;
      position: relative;
    }

    /* Floating history button */
    #historyBtn {
      position: absolute;
      top: 16px;
      right: 16px;
      background: #2ecc71;
      border: none;
      padding: 10px 14px;
      border-radius: 20px;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    /* Bottom booking card */
    #bookingCard {
      background: #1c1c1c;
      border-radius: 16px 16px 0 0;
      padding: 20px;
      box-shadow: 0 -4px 12px rgba(0,0,0,0.5);
    }

    h2 {
      margin-top: 0;
      font-size: 20px;
    }

    input, select {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: none;
      border-radius: 8px;
      font-size: 15px;
    }

    button.confirm {
      width: 100%;
      padding: 14px;
      margin-top: 12px;
      border: none;
      border-radius: 10px;
      background: #2ecc71;
      color: white;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
    }

    #confirmationMessage {
      margin-top: 12px;
      color: #2ecc71;
      font-weight: bold;
    }

    /* Slide-up history drawer */
    #historyDrawer {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      max-height: 60%;
      background: #1c1c1c;
      border-radius: 16px 16px 0 0;
      padding: 16px;
      box-shadow: 0 -4px 12px rgba(0,0,0,0.5);
      transform: translateY(100%);
      transition: transform 0.3s ease-in-out;
      overflow-y: auto;
    }

    .history-card {
      background: #2a2a2a;
      border-radius: 12px;
      padding: 12px;
      margin-bottom: 10px;
      color: #eee;
    }
  </style>
</head>
<body>
  <div id="map">
    <button id="historyBtn">History</button>
  </div>

  <!-- Bottom booking card -->
  <div id="bookingCard">
    <h2>Book a Ride</h2>
    <form id="rideForm">
      <input type="text" id="name" placeholder="Your name" required>
      <input type="text" id="pickup" placeholder="Pickup location" required>
      <input type="text" id="dropoff" placeholder="Drop-off location" required>
      <select id="rideType" required>
        <option value="Standard">Standard</option>
        <option value="Taxi">Taxi</option>
        <option value="Premium">Premium</option>
      </select>
      <button type="submit" class="confirm">Confirm Ride</button>
    </form>
    <p id="confirmationMessage"></p>
  </div>

  <!-- Ride History Drawer -->
  <div id="historyDrawer">
    <h3>Your Ride History</h3>
    <div id="rideHistoryList"></div>
  </div>

  <script>
    const rideForm = document.getElementById("rideForm");
    const confirmation = document.getElementById("confirmationMessage");
    const historyDrawer = document.getElementById("historyDrawer");
    const historyBtn = document.getElementById("historyBtn");
    const rideHistoryList = document.getElementById("rideHistoryList");

    let rideHistory = JSON.parse(localStorage.getItem("rideHistory")) || [];

    // Toggle history drawer
    historyBtn.addEventListener("click", () => {
      if (historyDrawer.style.transform === "translateY(0%)") {
        historyDrawer.style.transform = "translateY(100%)";
      } else {
        historyDrawer.style.transform = "translateY(0%)";
        renderHistory();
      }
    });

    // Render ride history
    function renderHistory() {
      rideHistoryList.innerHTML = "";
      rideHistory.forEach(ride => {
        const el = document.createElement("div");
        el.className = "history-card";
        el.innerHTML = `
          <strong>${ride.rideType}</strong><br>
          ${ride.pickup} → ${ride.dropoff}<br>
          <small>${ride.driver} • ${ride.car} • ${ride.plate} • ${ride.arrivalTime} mins</small>
        `;
        rideHistoryList.appendChild(el);
      });
    }

    // Handle booking
    rideForm.addEventListener("submit", (event) => {
      event.preventDefault();

      const name = document.getElementById("name").value;
      const pickup = document.getElementById("pickup").value;
      const dropoff = document.getElementById("dropoff").value;
      const rideType = document.getElementById("rideType").value;

      const drivers = ["Kwame", "Ama", "Yaw", "Akosua", "Kojo"];
      const cars = ["Toyota Corolla", "Hyundai Accent", "Kia Rio", "Nissan Versa", "Honda Civic"];
      const plates = ["GX-1234-24", "AS-5678-23", "GR-9101-22", "BA-3456-21", "ER-7890-20"];

      const driver = drivers[Math.floor(Math.random() * drivers.length)];
      const car = cars[Math.floor(Math.random() * cars.length)];
      const plate = plates[Math.floor(Math.random() * plates.length)];
      const arrivalTime = Math.floor(Math.random() * 9) + 2;

      const ride = { name, pickup, dropoff, rideType, driver, car, plate, arrivalTime };
      rideHistory.push(ride);
      localStorage.setItem("rideHistory", JSON.stringify(rideHistory));

      confirmation.textContent =
        `✅ Hi ${name}, your ${rideType} ride is confirmed! ${driver} is arriving in ${arrivalTime} minutes driving a ${car} (${plate}).`;

      rideForm.reset();
    });
  </script>
</body>
</html>
